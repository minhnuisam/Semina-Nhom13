/**
* 2007-2014 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
* @author    PrestaShop SA <contact@prestashop.com>
* @copyright 2007-2014 PrestaShop SA
* @license   http://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)
* International Registered Trademark & Property of PrestaShop SA
*/

$(document).ready(function(){var b=jQuery("#customtoken").val();if(!$("#apikeybox").is(":hidden")){$("#sender_order").keyup(function(){var h=$(this).val();if(isInteger(h)||h.length==0){$("#sender_order").attr("maxlength","17");$("#sender_order_text").text((17-h.length));}else{$("#sender_order").attr("maxlength","11");$("#sender_order_text").text((11-h.length));}});if($("#sender_order").val()!=""){var f=$("#sender_order").val();if(isInteger(f)||f.length==0){$("#sender_order").attr("maxlength","17");$("#sender_order_text").text((17-f.length));}else{$("#sender_order").attr("maxlength","11");$("#sender_order_text").text((11-f.length));}}$("#sender_order").keydown(function(h){if(h.keyCode==32){h.preventDefault();}});$("#sender_order_message").keyup(function(){var j=this.value.length,i=Math.ceil(j/160),h=i*160-(j%(i*160)||i*160);if(h==0){h=160;}$("#sender_order_message_text").text(h);$("#sender_order_message_text_count").text(i);});if($("#sender_order_message").val()!=""){var e=$("#sender_order_message").val().length,d=Math.ceil(e/160),c=d*160-(e%(d*160)||d*160);$("#sender_order_message_text").text(c);$("#sender_order_message_text_count").text(d);}$("#sender_shipment").keyup(function(){var h=$(this).val();if(isInteger(h)||h.length==0){$("#sender_shipment").attr("maxlength","17");$("#sender_shipment_text").text((17-h.length));}else{$("#sender_shipment").attr("maxlength","11");$("#sender_shipment_text").text((11-h.length));}});if($("#sender_shipment").val()!=""){var f=$("#sender_shipment").val();if(isInteger(f)||f.length==0){$("#sender_shipment").attr("maxlength","17");$("#sender_shipment_text").text((17-f.length));}else{$("#sender_shipment").attr("maxlength","11");$("#sender_shipment_text").text((11-f.length));}}$("#sender_shipment").keydown(function(h){if(h.keyCode==32){h.preventDefault();}});$("#sender_shipment_message").keyup(function(){var j=this.value.length,i=Math.ceil(j/160),h=i*160-(j%(i*160)||i*160);if(h==0){h=160;}$("#sender_shipment_message_text").text(h);$("#sender_shipment_message_text_count").text(i);});if($("#sender_shipment_message").val()!=""){var e=$("#sender_shipment_message").val().length,d=Math.ceil(e/160),c=d*160-(e%(d*160)||d*160);$("#sender_shipment_message_text").text(c);$("#sender_shipment_message_text_count").text(d);}$("#sender_campaign").keyup(function(){var h=$(this).val();if(isInteger(h)||h.length==0){$("#sender_campaign").attr("maxlength","17");$("#sender_campaign_text").text((17-h.length));}else{$("#sender_campaign").attr("maxlength","11");$("#sender_campaign_text").text((11-h.length));}});if($("#sender_campaign").val()!=""){var f=$("#sender_campaign").val();if(isInteger(f)||f.length==0){$("#sender_campaign").attr("maxlength","17");$("#sender_campaign_text").text((17-f.length));}else{$("#sender_campaign").attr("maxlength","11");$("#sender_campaign_text").text((11-f.length));}}$("#sender_campaign").keydown(function(h){if(h.keyCode==32){h.preventDefault();}});$("#sender_campaign_message").keyup(function(){var j=this.value.length,i=Math.ceil(j/160),h=i*160-(j%(i*160)||i*160);if(h==0){h=160;}$("#sender_campaign_message_text").text(h);$("#sender_campaign_message_text_count").text(i);});if($("#sender_campaign_message").val()!=""){var e=$("#sender_campaign_message").val().length,d=Math.ceil(e/160),c=d*160-(e%(d*160)||d*160);$("#sender_campaign_message_text").text(c);$("#sender_campaign_message_text_count").text(d);}$(".sms_order_setting").click(function(){var i=jQuery(this).val();var h="Order";$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"orderSetting="+i+"&token="+b+"&type="+h,beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();if(i==1){jQuery(".hideOrder").show();}else{jQuery(".hideOrder").hide();}}});});$(".sms_shiping_setting").click(function(){var i=jQuery(this).val();var h="shiping";$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"shipingSetting="+i+"&token="+b+"&type="+h,beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();if(i==1){jQuery(".hideShiping").show();}else{jQuery(".hideShiping").hide();}}});});$(".sms_campaign_setting").click(function(){var i=jQuery(this).val();var h="campaign";$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"campaignSetting="+i+"&token="+b+"&type="+h,beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();if(i==1){jQuery(".hideCampaign").show();}else{jQuery(".hideCampaign").hide();}}});});if($("input:radio[name=sms_order_setting]:checked").val()==0){$(".hideOrder").hide();}else{$(".hideOrder").show();}$(".Sendin_Sms_Choice").click(function(){if(jQuery(this).val()==1){jQuery(".multiplechoice").hide();jQuery(".singlechoice").show();}else{jQuery(".multiplechoice").show();jQuery(".singlechoice").hide();}});if($("input:radio[name=Sendin_Sms_Choice]:checked").val()==2){jQuery(".multiplechoice").show();jQuery(".singlechoice").hide();}else{jQuery(".singlechoice").show();jQuery(".multiplechoice").hide();}$(".sms_shiping_setting").click(function(){if(jQuery(this).val()==1){jQuery(".hideShiping").show();}else{jQuery(".hideShiping").hide();}});if($("input:radio[name=Sendin_Sms_Choice]:checked").val()==0){jQuery(".multiplechoice").show();jQuery(".singlechoice").hide();}else{jQuery(".singlechoice").show();jQuery(".multiplechoice").hide();}$(".sms_shiping_setting").click(function(){if(jQuery(this).val()==1){jQuery(".hideShiping").show();}else{jQuery(".hideShiping").hide();}});jQuery("#r1_Sendin_Sms_Choice").attr("checked",true);if($("input:radio[name=sms_credit]:checked").val()==0){jQuery(".hideCredit").hide();}else{jQuery(".hideCredit").show();}$(".sms_credit").click(function(){var h=jQuery(this).val();var i="sms_credit";$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"sms_credit="+h+"&token="+b+"&type="+i,beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();if(h==1){jQuery(".hideCredit").show();}else{jQuery(".hideCredit").hide();}}});});if($("input:radio[name=sms_shiping_setting]:checked").val()==0){$(".hideShiping").hide();}else{$(".hideShiping").show();}$(".sms_campaign_setting").click(function(){if(jQuery(this).val()==1){jQuery(".hideCampaign").show();}else{jQuery(".hideCampaign").hide();}});if($("input:radio[name=sms_campaign_setting]:checked").val()==0){$(".hideCampaign").hide();}else{$(".hideCampaign").show();}$("#selectSmsList").multiselect({header:false,checkall:false});$("#tabs li").click(function(){$("#tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();var h=$(this).find("a").attr("href");$(h).fadeIn();return false;});}$("#showUserlist").click(function(){if($("#userDetails").is(":hidden")){var h=$(".midleft tr").length;if(h<=0){if(a(1,b)){$("#Spantextless").show();$("#Spantextmore").hide();}}else{$("#Spantextless").show();$("#Spantextmore").hide();}}else{$("#Spantextmore").show();$("#Spantextless").hide();}$("#userDetails").slideToggle();});$("#select").multiselect({header:false,checkall:false});$(".keyyes").click(function(){if(jQuery(this).val()==1){jQuery("#apikeybox").show();jQuery(".hidetableblock").show();jQuery(".unsubscription").show();jQuery(".listData").show();}else{jQuery("#apikeybox").hide();jQuery(".hidetableblock").hide();jQuery(".unsubscription").hide();jQuery(".listData").hide();}});$(".script").click(function(){var h=jQuery(this).val();var i=jQuery("#customtoken").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajax.php",data:{script:h,token:i},beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();}});});$(".smtptestclick").click(function(){var i=jQuery(this).val();var h=jQuery("#customtoken").val();if(i==0){$("#smtptest").hide();}if(i==1){$("#smtptest").show();}$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxsmtpconfig.php",data:{smtptest:i,token:h},beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();}});});var g=$("input:radio[name=managesubscribe]:checked").val();if(g==0){$(".managesubscribeBlock").hide();}else{$(".managesubscribeBlock").show();}$(".managesubscribe").click(function(){var i=jQuery(this).val();var h=jQuery("#customtoken").val();if(i==0){$(".managesubscribeBlock").hide();}if(i==1){$(".managesubscribeBlock").show();}$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxsubscribeconfig.php",data:{managesubscribe:i,token:h},beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();}});});var b=jQuery("#customtoken").val();$('<div id="ajax-busy"/> loading..').css({opacity:0.5,position:"fixed",top:0,left:0,width:"100%",height:$(window).height()+"px",background:"white url("+base_url+"modules/sendinblue/img/loader.gif) no-repeat center"}).hide().appendTo("body");$(".ajax_contacts_href").live("click",function(l){var j=$(this).attr("email");var i=$(this).attr("status");var k=jQuery("#customtoken").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxcall.php",data:{email_value:j,newsletter_value:i,token:k},beforeSend:function(){$("#ajax-busy").show();},success:function(m){$("#ajax-busy").hide();}});var h=$("#page_no").val();a(h,k);});$(".ajax_sms_href").live("click",function(k){var i=$(this).attr("email");var j=jQuery("#customtoken").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxSmsStatus.php",data:{email:i,token:j},beforeSend:function(){$("#ajax-busy").show();},success:function(l){$("#ajax-busy").hide();}});var h=$("#page_no").val();a(h,j);});$(".ordertracking").click(function(){var h=jQuery(this).val();var i=jQuery("#customtoken").val();if(h==0){$("#ordertrack").hide();}if(h==1){$("#ordertrack").show();}});$("#importOrderTrack").click(function(){var i=jQuery("#importmsg").val();var h=jQuery("#customtoken").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxOrderTracking.php",data:{token:h},beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();$("#ordertrack").hide();alert(i);}});});function a(i,h){$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxemailresult.php",data:{page:i,token:h},beforeSend:function(){$("#ajax-busy").show();},success:function(j){$("#ajax-busy").hide();$(".midleft").html(j);$(".midleft").ajaxComplete(function(m,l,k){$(".midleft").html(j);});return true;}});}$(".pagination li.active").livequery("click",function(){var h=$(this).attr("p");$("#page_no").val(h);a(h,b);});$(".toolTip").live("mouseover mouseout",function(i){var k=$(this).attr("title");var j=$(this).offset();if(i.type=="mouseover"){$("body").append('<div id="tipkk" style="top:'+j.top+"px; left:"+j.left+'px; ">'+k+"</div>");var h=$("#tipkk").height()+25;$("#tipkk").css("top",(j.top-h)+"px");}else{if(i.type=="mouseout"){$("#tipkk").remove();}}});});$(".testOrdersmssend").live("click",function(){var d=$(this).attr("successmsg");var a=$(this).attr("failmsg");var c=$("#customtoken").val();var g=$("#langvalue").val();var b=$("#sender_order").val();var f=$("#sender_order_message").val();var e=$("#sender_order_number").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxtestsms.php",data:{sender:b,message:f,number:e,langvalue:g,token:c},beforeSend:function(){$("#ajax-busy").show();},success:function(i){$("#ajax-busy").hide();var h=$.parseJSON(i);if(h.result==true){alert(d);}else{alert(a);}}});return false;});$(".testSmsShipped").live("click",function(){var d=$(this).attr("successmsg");var a=$(this).attr("failmsg");var c=$("#customtoken").val();var g=$("#langvalue").val();var b=$("#sender_shipment").val();var f=$("#sender_shipment_message").val();var e=$("#sender_shipment_number").val();$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxTestSmsShipped.php",data:{sender:b,message:f,number:e,langvalue:g,token:c},beforeSend:function(){$("#ajax-busy").show();},success:function(i){$("#ajax-busy").hide();var h=$.parseJSON(i);if(h.result==true){alert(d);}else{alert(a);}}});return false;});$(".testSmsCampaignsend").live("click",function(){var h=$(this).attr("successmsg");var j=$(this).attr("failmsg");var g=$(this).attr("sendererr");var b=$(this).attr("mobileerr");var a=$(this).attr("messageerr");var c=$("#customtoken").val();var e=$("#langvalue").val();var f=$("#sender_campaign").val();var i=$("#sender_campaign_message").val();var d=$("#sender_campaign_number_test").val();if(f==""){alert(g);}else{if(i==""){alert(a);}else{if(d==""){alert(b);}else{$.ajax({type:"POST",async:false,url:base_url+"modules/sendinblue/ajaxCampaignSmsTest.php",data:{sender:f,message:i,number:d,langvalue:e,token:c},beforeSend:function(){$("#ajax-busy").show();},success:function(l){$("#ajax-busy").hide();var k=$.parseJSON(l);if(k.result==true){alert(h);}else{alert(j);}}});}}}return false;});$(".sender_order_save").live("click",function(){var c=$(this).attr("senderfield");var d=$(this).attr("messagefield");var a=$("#sender_order").val();var b=$("#sender_order_message").val();if(a==""){alert(c);document.getElementById("sender_order").focus();return false;}else{if(b==""){alert(d);document.getElementById("sender_order_message").focus();return false;}}});$(".sender_shipment_save").live("click",function(){var c=$(this).attr("senderfield");var d=$(this).attr("messagefield");var a=$("#sender_shipment").val();var b=$("#sender_shipment_message").val();if(a==""){alert(c);document.getElementById("sender_shipment").focus();return false;}else{if(b==""){alert(d);document.getElementById("sender_shipment_message").focus();return false;}}});$(".sender_campaign_save").live("click",function(){var c=$(this).attr("senderfield");var d=$(this).attr("messagefield");var a=$("#sender_campaign").val();var b=$("#sender_campaign_message").val();if(a==""){alert(c);document.getElementById("sender_campaign").focus();return false;}else{if(b==""){alert(d);document.getElementById("sender_campaign_message").focus();return false;}}});function isNormalInteger(a){return/^\+?(0|[0-9]\d*)$/.test(a);}function RegexEmail(b){var c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;var a=c.test(b);return a;}function validate(b,a){if(document.notify_sms_mail_form.sendin_notify_email.value==""||RegexEmail(document.notify_sms_mail_form.sendin_notify_email.value)==false){alert(b);document.notify_sms_mail_form.sendin_notify_email.focus();return false;}if(document.notify_sms_mail_form.sendin_notify_value.value<=0||isNormalInteger(document.notify_sms_mail_form.sendin_notify_value.value)==false){alert(a);document.notify_sms_mail_form.sendin_notify_value.focus();return false;}return(true);}function isInteger(b){var a=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/;if(a.test(b)){return true;}return false;}
